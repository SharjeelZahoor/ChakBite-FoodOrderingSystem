{% extends 'core/base.html' %}
{% load static %}
{% block title %}ChakBites - Home{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}
{% block content %}

<!-- Carousel HTML -->
<div class="carousel-container">
  <div class="carousel-slide">
    <div class="slide active">
      <img src="{% static 'core/carousel/pizza1.jpg' %}" alt="Delicious Pizza">
      <div class="slide-content">
        <h1>Authentic Italian Pizzas</h1>
        <p>Handcrafted with fresh ingredients and traditional recipes</p>
        <button class="cta-button">Order Now</button>
      </div>
    </div>
    
    <div class="slide">
      <img src="{% static 'core/carousel/pizza2.jpg' %}" alt="Gourmet Pizza">
      <div class="slide-content">
        <h1>30-Minute Delivery</h1>
        <p>Hot & fresh pizzas delivered to your doorstep in 30 minutes</p>
        <button class="cta-button">View Menu</button>
      </div>
    </div>
    
    <div class="slide">
      <img src="{% static 'core/carousel/pizza3.jpg' %}" alt="Specialty Pizza">
      <div class="slide-content">
        <h1>Special Offers</h1>
        <p>Buy 2 large pizzas and get a free garlic bread</p>
        <button class="cta-button">Claim Offer</button>
      </div>
    </div>
  </div>
  
  <!-- Navigation Arrows -->
  <button class="carousel-btn prev">&#10094;</button>
  <button class="carousel-btn next">&#10095;</button>
  
  <!-- Indicators -->
  <div class="carousel-indicators">
    <span class="indicator active"></span>
    <span class="indicator"></span>
    <span class="indicator"></span>
  </div>
</div>
<!-- Featured Pizzas -->
<section class="featured-pizzas py-5">
    <div class="container">
        <h2 class="section-title text-center mb-5">Our Signature Pizzas</h2>
        <div class="row g-4">
            {% for pizza in featured_pizzas %}
            <div class="col-md-4 mb-4">
                <div class="pizza-card">
                    <div class="pizza-image">
                        <img src="{{ pizza.image.url }}" class="img-fluid" alt="{{ pizza.name }}">
                        <div class="pizza-badge">Bestseller</div>
                    </div>
                    <div class="pizza-info">
                        <h3 class="pizza-name">{{ pizza.name }}</h3>
                        <p class="pizza-description">{{ pizza.description|truncatewords:15 }}</p>
                        <div class="pizza-pricing">
                            <div class="price-option">
                                <span class="size">Small</span>
                                <span class="price">Rs. {{ pizza.small_price }}</span>
                            </div>
                            <div class="price-option">
                                <span class="size">Medium</span>
                                <span class="price">Rs. {{ pizza.medium_price }}</span>
                            </div>
                            <div class="price-option">
                                <span class="size">Large</span>
                                <span class="price">Rs. {{ pizza.large_price }}</span>
                            </div>
                        </div>
                        <div class="pizza-actions">
                            <a href="{% url 'menu' %}" class="btn-customize">Customize</a>
                            <button class="btn-add-cart" data-pizza-id="{{ pizza.id }}">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="{% url 'menu' %}" class="btn-view-menu">View Full Menu</a>
        </div>
    </div>
</section>
<!-- Features Section -->
<section class="features-section py-5 bg-light">
    <div class="container">
        <h2 class="section-title text-center mb-5">Why ChakBites Stands Out</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="feature-box h-100">
                    <div class="feature-icon">
                        <i class="bi bi-flower1"></i>
                    </div>
                    <h4>Farm-Fresh Ingredients</h4>
                    <p>We partner with local farms to source the freshest ingredients, ensuring exceptional flavor in every bite.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-box h-100">
                    <div class="feature-icon" >
                        <i style="color: #d1261aff;" class="bi bi-fire"></i>
                    </div>
                    <h4>Wood-Fired Ovens</h4>
                    <p>Our traditional wood-fired ovens cook pizzas at high heat, creating the perfect crispy yet chewy crust.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="feature-box h-100">
                    <div class="feature-icon">
                        <i class="bi bi-award"></i>
                    </div>
                    <h4>Award-Winning Recipes</h4>
                    <p>Our chefs have perfected authentic recipes that have earned us recognition across Chakwal.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- About Section -->
<section class="about-section py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="about-content">
                    <h2 class="mb-4">The ChakBites Story</h2>
                    <p class="lead">Born from a passion for authentic flavors and community, ChakBites began in 2023 with a simple mission: bring the joy of artisanal pizza to every home in Chakwal.</p>
                    <p>Our founder, Chef Ahmed, spent years perfecting recipes in Italy before returning to share his craft with his hometown. Every pizza is made with love, tradition, and the finest ingredients.</p>
                    <div class="d-flex align-items-center mt-4">
                        <img src="{% static 'core/logo.png' %}" alt="ChakBites Logo" class="me-3" style="height: 60px;">
                        <div>
                            <h5 class="mb-0">Crafted in Chakwal</h5>
                            <p class="mb-0">Since 2023</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="video-container">
                    <div class="ratio ratio-16x9 rounded overflow-hidden shadow-lg">
                        <video controls poster="{% static 'core/carousel/pizza1.jpg' %}">
                            <source src="{% static 'core/video.mp4' %}" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Testimonials -->
<section class="testimonials-section py-5 bg-light">
    <div class="container">
        <h2 class="section-title text-center mb-5">Customer Love</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="testimonial-card h-100">
                    <div class="rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p>"The authentic wood-fired flavor takes me back to my travels in Italy. ChakBites is a true gem in Chakwal!"</p>
                    <div class="client-info">
                        <div class="client-avatar">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Fatima Khan</h6>
                            <small class="text-muted">Food Blogger</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card h-100">
                    <div class="rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                    </div>
                    <p>"Friday family tradition! The kids love the Margherita, while my husband and I enjoy the Truffle Special."</p>
                    <div class="client-info">
                        <div class="client-avatar">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Sara Ahmed</h6>
                            <small class="text-muted">Regular Customer</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="testimonial-card h-100">
                    <div class="rating">
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-fill"></i>
                        <i class="bi bi-star-half"></i>
                    </div>
                    <p>"As a student on a budget, ChakBites' student discounts and meal deals are a lifesaver during exam weeks!"</p>
                    <div class="client-info">
                        <div class="client-avatar">
                            <i class="bi bi-person-fill"></i>
                        </div>
                        <div>
                            <h6 class="mb-0">Ali Raza</h6>
                            <small class="text-muted">University Student</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
{% block extra_js %}
<script>
    // Carousel functionality
    const slides = document.querySelectorAll('.slide');
    const indicators = document.querySelectorAll('.indicator');
    const prevBtn = document.querySelector('.prev');
    const nextBtn = document.querySelector('.next');
    const carouselSlide = document.querySelector('.carousel-slide');
    
    let counter = 0;
    const slideWidth = slides[0].clientWidth;
    
    // Set initial position
    carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
    
    // Function to move to next slide
    function nextSlide() {
        if (counter >= slides.length - 1) {
            counter = 0;
        } else {
            counter++;
        }
        carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
        updateIndicators();
    }
    
    // Function to move to previous slide
    function prevSlide() {
        if (counter <= 0) {
            counter = slides.length - 1;
        } else {
            counter--;
        }
        carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
        updateIndicators();
    }
    
    // Function to update indicators
    function updateIndicators() {
        indicators.forEach(indicator => {
            indicator.classList.remove('active');
        });
        indicators[counter].classList.add('active');
    }
    
    // Event listeners for buttons
    nextBtn.addEventListener('click', nextSlide);
    prevBtn.addEventListener('click', prevSlide);
    
    // Event listeners for indicators
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', () => {
            counter = index;
            carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
            updateIndicators();
        });
    });
    
    // Auto slide
    setInterval(nextSlide, 5000);
    
    // Pause video when modal is closed
    document.getElementById('videoModal').addEventListener('hidden.bs.modal', function () {
        const video = document.getElementById('modalVideo');
        video.pause();
    });
    
    // Add to cart functionality
    document.querySelectorAll('.btn-add-cart').forEach(button => {
        button.addEventListener('click', function() {
            const pizzaId = this.getAttribute('data-pizza-id');
            
            // Show a simple notification for now
            const notification = document.createElement('div');
            notification.className = 'position-fixed top-0 end-0 p-3';
            notification.style.zIndex = '11';
            notification.innerHTML = `
                <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true">
                    <div class="toast-header">
                        <strong class="me-auto">ChakBites</strong>
                        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                        Pizza added to cart!
                    </div>
                </div>
            `;
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        });
    });
</script>
{% endblock %}